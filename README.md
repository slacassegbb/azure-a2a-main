# âš¡ Azure A2A Multi-Agent System

This repository is an **experimental (and evolving)** implementation of an **Azure-based A2A multi-agent orchestration system**. 

It demonstrates how to design, host, and scale a distributed network of intelligent agents using open protocols (**A2A**, **MCP**), **Azure AI Foundry**, and Azure-native services for **memory** and **observability**. The goal is to create an interoperable, production-grade framework that allows agents to communicate, collaborate, and reason together across environments and organizations.

---

## ğŸ‰ What's New â€” Major Updates (Last 2 Months)

### ğŸ¬ **Sora 2 Video Generation & Remix Agent** (January 2026)
- **AI video creation** â€” Generate high-quality videos from text descriptions using Azure OpenAI Sora 2
- **Video remix capability** â€” Transform existing videos with new prompts (change lighting, weather, mood, style)
- **One-click editing** â€” Purple "Remix" button overlay on videos for instant modifications
- **Multiple resolutions** â€” Support for portrait, landscape, and square video formats
- **Duration options** â€” Create videos in 4, 8, or 12 second lengths

### ğŸ–¼ï¸ **DALL-E Image Generation & Refinement Agent** (January 2026)
- **AI image creation** â€” Generate images from text descriptions with multiple size options
- **Image refinement** â€” Purple "Refine" button overlay for easy enhancement requests
- **Mask-based editing** â€” Paint specific areas to refine targeted regions with precision
- **Consistent editing UI** â€” Unified purple button design for both image and video editing

### âš¡ **Parallel & Sequential Multi-Agent Execution** (December 2025)
- **Natural language orchestration** â€” Type "Ask Claims, Fraud, and Legal agents about this claim" and all three run in parallel automatically
- **Smart dependency detection** â€” System detects "then", "after", "before" keywords and executes agents in the correct sequential order
- **Dramatic performance gains** â€” Parallel execution using asyncio.gather() reduces total execution time by running independent agents simultaneously
- **Context passing** â€” Sequential workflows automatically pass outputs from one agent to the next with smart truncation
- **Works everywhere** â€” Available in both regular chat and visual workflow designer for maximum flexibility

### ğŸ“ **Agent File Sharing & Collaboration** (December 2025)
- **Inter-agent file exchange** â€” Agents can now share files with each other during workflows
- **Persistent file registry** â€” Files uploaded or generated by agents persist across sessions
- **Blob storage integration** â€” All files stored in Azure Blob Storage for reliability and access
- **Visual file tracking** â€” See which files were used and created in workflow visualizations

### ğŸš€ **Azure AI Foundry Agent Service Migration**
- **Complete refactor from Assistants API to Responses API** â€” Migrated the entire orchestration system from thread-based Assistants API to Azure AI Foundry's stateless Responses API, eliminating thread management complexity and improving scalability
- **Real-time streaming support** â€” Full token-by-token streaming implementation across backend and frontend for live agent responses, status updates, and tool execution events
- **Direct HTTP integration** â€” Optimized API calls using direct HTTP requests with proper authentication headers and comprehensive error handling
- **Stateless architecture** â€” No more thread creation/management overhead; each request is independent and faster
- **Reference implementation** â€” New Classification Response API agent demonstrates best practices for Responses API integration

### âš¡ **Visual Workflow Designer & Orchestration**
- **Interactive canvas-based workflow builder** â€” Drag-and-drop interface for designing multi-agent workflows visually with zoom, pan, and selection controls
- **Dual-mode interface** â€” Seamlessly switch between Visual Designer and Text Editor modes with automatic synchronization
- **Real-time workflow execution visualization** â€” Watch agents execute in real-time with status indicators, completion timers, and message bubbles on the canvas
- **Parallel execution engine** â€” Run multiple independent agents simultaneously using `asyncio.gather()` for dramatic performance improvements
- **Smart sequential detection** â€” Automatically detects dependencies (e.g., "then", "after that", "before") in natural language and executes agents in the correct order
- **Context passing** â€” Sequential workflows intelligently pass previous step outputs to subsequent steps with smart truncation (1000 chars) to prevent context window explosion
- **Duplicate prevention** â€” Advanced deduplication logic prevents duplicate messages in workflow activity sidebar and agent message bubbles
- **Step reordering** â€” Move steps up/down, edit descriptions, and delete steps with keyboard shortcuts
- **Workflow analytics** â€” Track total execution time, token usage, cost estimation, agents completed, and average time per agent

### ğŸ“Š **Token Usage & Cost Analytics**
- **Real-time token tracking** â€” Monitor prompt tokens, completion tokens, and total tokens for every agent execution
- **Cost calculation** â€” Automatic cost estimation based on Azure OpenAI pricing
- **Workflow analytics bar** â€” Comprehensive dashboard showing total time, tokens consumed, agents completed, and average performance per agent
- **Per-agent metrics** â€” Track individual agent performance and resource consumption
- **Token usage display** â€” View token statistics in workflow designer without cluttering main chat

### ğŸ“ **Benjamin School Remote Agents** (4 New Specialized Teacher Agents)
- **AP Calculus Teacher** â€” Helps students with calculus problems, Riemann sums, derivatives, integrals, and exam preparation using grounded curriculum documents and practice exams
- **AP Environmental Science (APES) Teacher** â€” Guides students through all APES units with access to comprehensive review sheets, study materials, and biodiversity content
- **Biology Teacher** â€” Assists with biology topics (Chapter 9 & 10) using chapter-specific documentation for cellular processes, genetics, and more
- **English Teacher** â€” Helps with writing assignments using rubrics, outline templates, self-evaluation checklists, and TBS writing standards

### ğŸ¨ **UI/UX Revolution**
- **Complete design rebrand** â€” Switched from red to light blue accent color throughout the entire interface for a modern, professional look
- **A2A branding integration** â€” New A2A logo beside bot icon in sidebar and dedicated branding assets
- **Collapsible sidebar sections** â€” Remote Agents and Connected Users panels now collapse for better space management
- **Network DAG moved to sidebar** â€” Agent network visualization moved from top bar to sidebar for cleaner layout
- **Improved streaming visualization** â€” Real-time token-by-token streaming with smooth typing animation and better status indicators
- **ChatGPT-like empty chat behavior** â€” Clean welcome screen with typing animation that disappears on first message
- **Enhanced tooltips** â€” Contextual help for attach files, voice input, phone call, system prompts, clear memory, and DAG diagram buttons
- **File history hover improvements** â€” Better color contrast and visual feedback for file history interactions
- **Balanced spacing** â€” Refined spacing between welcome message and input for optimal visual hierarchy
- **Simplified logo design** â€” Clean blue icon-only logo for modern aesthetics

### ğŸ‘¥ **Multi-Tenancy & Session Management**
- **User-based session management** â€” Complete isolation of user sessions with authentication-based access control
- **Session-scoped file isolation** â€” Files uploaded by one user are completely isolated from other users' sessions
- **Session-scoped memory service** â€” Each user session has independent memory storage and retrieval
- **WebSocket authentication** â€” Secure WebSocket connections with token-based authentication and SECRET_KEY validation
- **Connected users tracking** â€” Real-time display of all connected users with proper session ID handling
- **Conversation persistence** â€” ChatGPT-like conversation history that persists across sessions with proper session scoping
- **Delete conversation support** â€” Users can delete their own conversations with proper session ID validation

### ğŸ“ **File Management & Storage**
- **Azure Blob Storage integration** â€” Persistent file history sync across sessions using Azure Storage
- **Session-scoped uploads** â€” File uploads are automatically scoped to the user's session
- **File history API** â€” RESTful API for retrieving conversation file history
- **Multimodal document processing** â€” Support for PDF, images, Office documents with LibreOffice integration
- **File search integration** â€” Uploaded files are automatically indexed for agent file search capabilities

### ğŸŒ **Agent Network & Visualization**
- **Interactive Agent Network DAG** â€” Real-time visualization of agent connections and message flow
- **Hexagonal agent nodes** â€” Unique colors per agent with consistent styling across all visualizations
- **Connection animations** â€” Visual representation of agent-to-agent communication with directional arrows
- **Zoom and pan controls** â€” Navigate complex agent networks with smooth canvas interactions
- **Agent status indicators** â€” Real-time status display for each agent (idle, working, completed, failed)

### ğŸ¯ **Agent Catalog & Discovery**
- **Agent persistence** â€” Registered agents persist in the catalog across system restarts
- **Catalog filtering** â€” Browse agents by category, capability, or search keywords
- **Session-enabled agents** â€” Filter agent list to show only agents enabled for current session
- **Agent card enhancements** â€” Better visual design with consistent colors and metadata display
- **Self-registration** â€” Remote agents can automatically register themselves with the host on startup

### ğŸ”Š **Voice & Audio Integration**
- **Voice input support** â€” Microphone button for voice-to-text input
- **Phone call integration** â€” Direct phone call capabilities through dedicated UI button
- **Audio processing** â€” Voice recordings stored and processed for multimodal interactions

### ğŸ› ï¸ **Developer Experience Improvements**
- **Comprehensive logging** â€” Event logging for user_list_update, task events, and orchestration flows with detailed debugging info
- **Better error handling** â€” Comprehensive error tracking throughout orchestration pipeline with status determination
- **Run cleanup** â€” Proper cleanup of Azure AI Foundry resources to prevent resource leaks
- **Datetime fixes** â€” Resolved datetime serialization issues for JSON responses
- **Agent mode detection** â€” Backend now properly detects and routes agent mode vs. normal chat mode
- **Tool output formatting** â€” Improved formatting of tool execution results in chat display

### ğŸ“š **Documentation & Guides**
- **`PARALLEL_WORKFLOW_GUIDE.md`** â€” Complete guide for building and executing parallel workflows
- **`VISUAL_WORKFLOW_DESIGNER.md`** â€” Comprehensive documentation for visual workflow designer features and controls
- **`VISUAL_WORKFLOW_UI_GUIDE.md`** â€” UI implementation guide for workflow components
- **`IMPLEMENTATION_SUMMARY.md`** â€” Technical architecture and implementation details
- **`RESPONSES_API_MIGRATION_PLAN.md`** â€” Detailed migration strategy from Assistants API to Responses API
- **`RESPONSES_API_PROGRESS.md`** â€” Phase-by-phase progress tracking for the migration
- **`CI-CD-GUIDE.md`** â€” GitHub Actions setup and deployment automation guide
- **Updated deployment scripts** â€” Refined PowerShell and Bash scripts for local and Azure cloud deployment

### ğŸš€ **Infrastructure & Deployment**
- **GitHub Actions CI/CD** â€” Automated build, test, and deployment pipeline
- **Docker support** â€” Containerized backend and frontend with docker-compose configurations
- **Azure deployment scripts** â€” One-click deployment to Azure Container Apps with managed identity
- **Environment automation** â€” Automated setup of GitHub secrets and Azure resources
- **Remote agent deployment** â€” Streamlined scripts for deploying remote agents to Azure

### ğŸ› **Stability & Bug Fixes**
- **Fixed duplicate message issues** â€” Eliminated duplicate messages in workflow designer and chat panel
- **WebSocket authentication fixes** â€” Proper token handling and SECRET_KEY initialization
- **Session ID fixes** â€” Removed double user_ prefix in session IDs
- **Workflow visualization persistence** â€” Fixed workflow canvas persisting when switching conversations
- **Agent routing improvements** â€” Better routing for repeated agents in workflows using taskId tracking
- **Host agent event handling** â€” Proper routing of host agent events to correct workflow steps
- **Token usage filtering** â€” Prevented token_usage data from appearing in main chat display
- **File history hover colors** â€” Fixed contrast issues for better visibility
- **Sidebar collapse alignment** â€” Fixed Connected Users section alignment when collapsed
- **Status display issues** â€” Resolved status determination and datetime serialization problems

### ğŸ¨ **Additional Remote Agents & Templates**
- **Video Agent (Sora2)** â€” Video generation capabilities
- **SalesForce Agent** â€” CRM integration for Salesforce operations
- **Updated agent registry** â€” Expanded agent catalog with consistent metadata
- **Template agent improvements** â€” Enhanced azurefoundry_template for easier custom agent creation

---

This repository contains the complete documentation and setup instructions including the **Host Orchestrator (backend)**, **Frontend UI (frontend)**, and a collection of **specialized remote agents (remote_agents)**. Each remote agent runs independently and can connect to the Host Orchestrator through open protocols like **A2A (Agent-to-Agent)**. 

You'll find detailed guides to install, configure, and run the full system, along with a **ready-to-use Agent Template** for building custom agents, plus sample agents that showcase realistic enterprise workflows including the **Claims, Fraud, Legal, Branding, Classification, Deep Search, Assessment & Estimation, Customer Support (MCP), Image Analysis, Image Generation, and Sentiment Analysis (Google ADK)** agents. Including an agent template for you to build your own remote agents quickly. 

Special thank you to Sergey Chernykh, Ryan Morgan, David Barkol and Owen Van Valkenburg for their peer review and contribution. 

---

## ğŸ¥ Demonstration of Azure A2A Multi-Agent System

<table>
  <tr>
    <td align="center" width="33%">
      <a href="https://youtu.be/5t78x_9qUKM">
        <div style="width: 320px; height: 180px; overflow: hidden; margin: 0 auto; border-radius: 4px;">
          <img src="https://img.youtube.com/vi/5t78x_9qUKM/maxresdefault.jpg" style="width: 100%; height: 100%; object-fit: cover; transform: scale(1.4);" alt="Claims Workflow Demo" />
        </div>
        <br/><br/>
        <b>Claims Workflow</b><br/>
        <sub>Intro to Azure A2A + Multimodal + Memory</sub>
      </a>
    </td>
    <td align="center" width="33%">
      <a href="https://youtu.be/ziz7n7jLd7E">
        <img src="https://img.youtube.com/vi/ziz7n7jLd7E/maxresdefault.jpg" width="320" height="180" style="display: block; margin: 0 auto; object-fit: cover; border-radius: 4px;" alt="Content Creation Workflow Demo" />
        <br/><br/>
        <b>Content Creation Workflow</b><br/>
        <sub>Advanced Orchestration + Inter-Agent File Exchange + Human Collaboration</sub>
      </a>
    </td>
    <td align="center" width="33%">
      <a href="https://youtu.be/CenIL5zq79w">
        <img src="https://img.youtube.com/vi/CenIL5zq79w/maxresdefault.jpg" width="320" height="180" style="display: block; margin: 0 auto; object-fit: cover; border-radius: 4px;" alt="Customer Support Workflow Demo" />
        <br/><br/>
        <b>Customer Support Workflow</b><br/>
        <sub>MCP Remote Agents + Workflows + Human in the Loop</sub>
      </a>
    </td>
  </tr>
</table>

<br/>

> _Click any thumbnail to watch the Azure A2A multi-agent system in action â€” featuring dynamic orchestration, multimodal memory, and remote agents across environments._

## ğŸ“– Architecture Whitepaper â€” *Scaling Agents for Enterprises*

A full companion paper is included with this repository, explaining the vision, architecture, protocols, and patterns behind this system.

<p align="center">
  <a href="https://github.com/slacassegbb/azure-a2a-main/raw/main/Scaling_Agents_Enterprise.pdf">
    <img src="./paper_thumbnail.png" alt="Scaling Agents for Enterprises Whitepaper" width="350"/>
  </a>
</p>

> _Click the thumbnail above to open **Scaling_Agents.pdf** â€” "Scaling Agents for Enterprises: Guide to designing and scaling enterprise multi-agent systems using open standard agent protocols."_

---

## ğŸ› ï¸ Local & Cloud Deployment

This guide focuses on local development, but the architecture is cloud-ready and can be easily deployed to Azure using **Bicep** or **Terraform**, allowing you to host and run both host and remote agents in the cloud.

**Backend** â€“ Runs the Host Orchestrator and core A2A services (registry, memory, orchestration logic).  
**Frontend** â€“ Provides the multi-agent user interface for managing sessions and visualizing interactions.  
**Remote Agents** â€“ Specialized agents deployed independently with **local** endpoints that connect to the host via the A2A protocol.

Instructions below explain how to set up each component and run the system locally before deploying it to the cloud.

---

## âœ… Prerequisites

Install the following locally:

- Git and VS Code *(recommended)*
- Python 3.13+
- Optional: Docker 

Provision the following services in your Microsoft Azure subscription:

- Azure AI Foundry (make sure you have a model and embeddings model created)
- Search Service *(optional but recommended)*
- Storage Account *(optional but recommended)*
- Application Insights *(optional)*

---

## ğŸ› ï¸ Installation and Setup Guide (Backend, Frontend and Remote Agents)

### ğŸ“¦ 1. Clone the Repository

```bash
git clone https://github.com/slacassegbb/azure-a2a-main.git
cd azure-a2a-main
```

---

### ğŸ”§ 2. Configure the Root Environment Variables

There is **one `.env.example` file in the root** of this repo. 

Create a copy of the file and rename it to `.env`:

```bash
cp .env.example .env
```

Open `.env` and configure your keys and service endpoints. Instructions are provided in the example file for each key and setup. Please ensure that the required Microsoft Azure services are provisioned in your subscription.

---

### âš™ï¸ 3. Start the Host Orchestrator (Backend)

The **Host Orchestrator** acts as the core intelligence and coordination hub:

- Registers agents through local A2A handshake or through the agent catalog
- Manages memory and multimodal content processing
- Provides Azure AI Foundry agent orchestration to run distributed A2A multi-agent workflows 
- WebSocket for backend and frontend integration: `http://localhost:8080`
- A2A Backend API server: `http://localhost:12000`

```bash
cd backend
python3 -m venv .venv    # (Windows: python -m venv venv)
source .venv/bin/activate # (Windows: .\venv\Scripts\Activate.ps1)
python -m pip install -r requirements.txt

# Optional for Multi-Modal Document Processing
brew install --cask LibreOffice    # (Windows: winget install TheDocumentFoundation.LibreOffice)

# Important: Make sure you are logged into Azure
# In Terminal or PowerShell, run:
az login

# Start the backend API server
python backend_production.py
```

**In a separate terminal, start the WebSocket server:**

```bash
cd backend
source .venv/bin/activate # (Windows: .\venv\Scripts\Activate.ps1)
python start_websocket.py
```

---

### ğŸ–¥ï¸ 4. Start the Multi-Agent UI (Frontend)

The **Frontend** provides an interactive web interface for managing, orchestrating, and visualizing multi-agent sessions.

- Connects to the Host Orchestrator via WebSocket for real-time updates and event streaming
- Enables users to create, manage, and monitor multi-agent conversations and distributed task workflows
- Provides visualization of agent interactions, delegations, and tool execution traces
- Supports file uploads, multimodal content processing, and voice interaction
- Includes a local agent catalog for browsing and registering agents dynamically
- Runs locally at `http://localhost:3000` by default

First download ğŸ‘‰ https://nodejs.org/en/download/

```bash
cd frontend
npm install
npm run dev
```

Then open:

```
http://localhost:3000
```

---

<small><small>

## ğŸ¤– Remote Agents Setup Guide

A set of sample specialized A2A remote agents is provided in the `remote_agents` folder. 

---

### ğŸ¨ Azure AI Foundry (A2A) â€” **Template Agent** â­
**Directory:** `remote_agents\azurefoundry_template` Â· **A2A_PORT=9020** (customizable)

**A ready-to-use template for building your own custom A2A agents.** The Template Agent provides all the boilerplate code needed to create specialized remote agents that integrate seamlessly with the Azure A2A multi-agent system. Simply customize the agent's personality, skills, and domain knowledge by editing 3 key sections. Includes full A2A protocol support, file search integration for document grounding, optional Bing search, Gradio UI for testing, and production-ready logging. Perfect starting point for creating domain-specific agents in minutes.

ğŸ“– **[View Template Agent Documentation â†’](./remote_agents/azurefoundry_template/README.md)**

---

### ğŸŸ¦ Azure AI Foundry (A2A) â€” **Assessment & Estimation Agent**
**Directory:** `remote_agents\azurefoundry_assessment` Â· **A2A_PORT=9002**

The AI Foundry Assessment & Estimation Agent is an Azure-based A2A-compatible agent grounded in synthetic data for multi-line insurance assessment and cost estimation. It covers auto, property, travel, and health domains, applying structured workflows and QA rules. The agent runs as both an API service and interactive Gradio UI, integrating seamlessly with a Host Orchestrator for multi-agent collaboration.

---

### ğŸŸ© Azure AI Foundry (A2A) â€” **Branding Agent**
**Directory:** `remote_agents\azurefoundry_branding` Â· **A2A_PORT=9033`

The AI Foundry Branding & Content Agent is an Azure-based A2A-compatible agent grounded in synthetic branding data that enforces visual and tonal consistency. It provides guidance on brand colors, lighting, composition, and copy tone to ensure all creative outputs stay on-brand. The agent runs as both an API service and interactive Gradio UI, integrating with a Host Orchestrator for collaborative content creation.

---

### ğŸŸ§ Azure AI Foundry (A2A) â€” **Claims Agent**
**Directory:** `remote_agents\azurefoundry_claims` Â· **A2A_PORT=9001`

The AI Foundry Claims Specialist Agent is an Azure-based A2A-compatible agent grounded in synthetic insurance data for realistic multi-line claims processing. It provides intelligent coverage validation, settlement estimation, documentation guidance, and regulatory compliance across auto, property, travel, and health domains. The agent operates as both an API service and interactive Gradio UI, integrating with a Host Orchestrator for coordinated claims handling and escalation.

---

### ğŸŸ¥ Azure AI Foundry (A2A) â€” **Classification Agent**
**Directory:** `remote_agents\azurefoundry_classification` Â· **A2A_PORT=8001`

The AI Foundry Classification Triage Agent is an Azure-based A2A-compatible agent grounded in synthetic customer support data for realistic incident handling. It classifies incoming issues into categories like fraud, payment, security, or technical problems, assesses their priority, and routes them to the right teams using ServiceNow standards. The agent runs as both an API service and interactive Gradio UI, integrating with a Host Orchestrator for automated triage and escalation workflows.

---

### ğŸŸª Azure AI Foundry (A2A) â€” **Deep Search Agent**
**Directory:** `remote_agents\azurefoundry_Deep_Search` Â· **A2A_PORT=8002`

The AI Foundry Deep Search Knowledge Agent is an Azure-based A2A-compatible agent grounded in synthetic customer support documentation. It performs deep semantic search across topics like account management, billing, fraud prevention, and technical support to deliver precise, context-aware answers. The agent operates as both an API service and interactive Gradio UI, integrating with a Host Orchestrator for enterprise knowledge retrieval and customer assistance workflows.

---

### ğŸŸ« Azure AI Foundry (A2A) â€” **Fraud Agent**
**Directory:** `remote_agents\azurefoundry_fraud` Â· **A2A_PORT=9004`

The AI Foundry Fraud Intelligence Agent is an Azure-based A2A-compatible agent grounded in synthetic fraud investigation data for realistic multi-line insurance analysis. It detects red flags, evaluates claim patterns, and recommends SIU escalation across auto, property, travel, and health domains. The agent operates as both an API service and interactive Gradio UI, integrating with a Host Orchestrator for coordinated fraud detection and compliance workflows.

---

### â¬› Azure AI Foundry (A2A) â€” **Image Analysis Agent** *(Experimental)*
**Directory:** `remote_agents\azurefoundry_image_analysis` Â· **A2A_PORT=9066`

The AI Foundry Image Analysis Agent is an Azure-based A2A-compatible vision agent that **analyzes and interprets visual content**. It performs **detailed image understanding, object detection, scene analysis, and visual quality assessment** to provide actionable insights. The agent operates as an API service, integrating with a Host Orchestrator for coordinated visual analysis and content validation workflows.

---

### â¬› Azure AI Foundry (A2A) â€” **Image Generation Agent** *(Experimental)*
**Directory:** `remote_agents\azurefoundry_image_generator` Â· **A2A_PORT=9010`

The AI Foundry Image Generator Agent is an Azure-based A2A-compatible creative agent that **transforms text prompts into high-quality images** and performs **advanced image editing**. It supports **in-painting, masking, and prompt-based modifications** to refine or extend existing visuals. The agent operates as an API service, integrating with a Host Orchestrator for coordinated visual creation and editing workflows.

---

### ğŸŸ¨ Azure AI Foundry (A2A) â€” **Legal Agent**
**Directory:** `remote_agents\azurefoundry_legal` Â· **A2A_PORT=8006`

The AI Foundry Legal Compliance & Regulatory Agent is an Azure-based A2A-compatible agent grounded in synthetic legal and compliance data. It analyzes regulatory frameworks like GDPR, SOX, and CCPA, performs risk assessments, and reviews contracts and compliance documents for legal integrity. The agent operates as both an API service and interactive Gradio dashboard, integrating with a Host Orchestrator for coordinated governance and audit workflows.

---

### ğŸŸ¦ Azure AI Foundry (A2A + MCP) â€” **Customer Support Agent (MCP)** *(Experimental)*
**Directory:** `remote_agents\azurefoundry_SN` Â· **A2A_PORT=8000`

The AI Foundry Expert Agent is an Azure-based **A2A and MCP-compatible** agent grounded in synthetic enterprise and support data. It can execute **ServiceNow actions via MCP server** (create and update **incidents**, look up customers, etc.), execute banking actions, perform web (with Bing added to Foundry agent portal) and document searches, and manage **human-in-the-loop** escalations. The agent runs as both an API service and interactive Gradio UI, integrating with a Host Orchestrator to automate IT service management, banking workflows, and expert escalation scenarios.

---

### ğŸŸ© Google ADK (A2A) â€” **Sentiment Agent (MCP)**
**Directory:** `remote_agents\google_adk` Â· **A2A_PORT=8003`

The Sentiment Analysis Agent is a Google ADK A2A-compatible agent grounded in synthetic customer interaction data. It detects emotional tone, classifies sentiment, and personalizes responses across customer feedback, chats, and service interactions. The agent operates as a lightweight API service that integrates with a Host Orchestrator to enhance customer understanding, improve satisfaction, and guide next-step decisions based on detected sentiment.

---

### ğŸš€ Building Your Own Agents

Want to create a custom agent? Start with the **Template Agent** (listed first above) â€” it provides a clean, documented foundation with step-by-step instructions for building domain-specific agents in minutes.

You can also use the sample agents as-is to test your scenarios, or customize them for your specific needs. Each agent can be easily modified, and the `documents` folder lets you add your own data for grounding and testing.

**Important:** Before running any remote agent, make sure to create your own `.env` file in each remote agent directoryâ€”use the included `.env.example` as your starting point.

</small></small>

</small>

### Running the agents

```bash
cd remote_agents/<agent-name>
python3 -m venv .venv    # (Windows: python -m venv venv)
source .venv/bin/activate # (Windows: .\venv\Scripts\Activate.ps11)
pip install uv
uv run .                  # use 'uv run . --ui' to run Gradio UI
```

Once started, these agents become available in the **Agent Catalog** and can be registered into an active session. You can also bring your own **A2A-compliant** agents by simply connecting them via their endpoint or IP address. If the backend is already running, any agent you start will automatically register itself to the current session.

---

## ğŸŒ Instructions for the Google ADK Sentiment Agent (Cross-Cloud Example)

To demonstrate cross-cloud remote agents outside Azure, you can use the specialized **Google ADK Sentiment Analysis Agent**. Just update its `.env` file with your own Google ADK key before starting it.

```bash
cd remote_agents/google-adk-agent   # or your path
python3 -m venv .venv    # (Windows: python -m venv venv)
source .venv/bin/activate # (Windows: .\venv\Scripts\Activate.ps1)
pip install a2a-sdk
python __main__.py
```

---

## ğŸŒ 8. Customer Support MCP Agent (ServiceNow MCP integration)

This agent is experimental but fully functional.

To set up the MCP server, an MCP Server is also provided in the `MCP_SERVICENOW/servicenow-mcp` directory to demonstrate ServiceNow MCP integration. 

**To use it in your own ServiceNow environment, youâ€™ll need to supply your own ServiceNow credentials in the `.env` file.**

**Important:** Azure AI Foundry agents require a **public MCP endpoint**, not `localhost` as currently configured. You can either:

- Deploy the MCP server in a container or host with a public URL, or
- Use **NGROK** to expose localhost. 

The Customer Support MCP Agent can run as a standalone agent and includes its own **Gradio UI**, which you can use to test it independently or demonstrate **human-in-the-loop** orchestration between the host and remote agent.

**Running the Customer Support MCP Agent**

```bash
cd /azurefoundry_SN/MCP_SERVICENOW/servicenow-mcp
python -m mcp_server_servicenow.cli --transport http --host 127.0.0.1 --port 8005   # change 127.0.0.1 to your public endpoint if not using NGROK

# Launch the Customer Support MCP Agent with UI
cd remote_agents/azurefoundry_SN
python3 -m venv .venv    # (Windows: python -m venv venv)
source .venv/bin/activate # (Windows: .\venv\Scripts\Activate.ps1)
uv run . --ui            # use --ui to also load the Gradio app on localhost
```

Then open:

```
http://localhost:8085
```

---

## ğŸ‰ Local Multi-Agent Network Running

Start the backend, the frontend, and connect your agents or register them manually.
